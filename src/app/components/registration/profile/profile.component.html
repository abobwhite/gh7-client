<div class="container animated-page">
  <div fxFlex="50%" fxFlex.lt-md="80%" class="card-container" *ngIf="auth0User">
    <mat-card>
      <form
        [formGroup]="allUsersFormGroup"
        (ngSubmit)="register()"
        novalidate>
        <div class="form-field">
          <h2>{{ 'profile.thanksHeader' | translate }}</h2>
          <h3>{{ 'profile.pleaseComplete' | translate }}</h3>
        </div>
        <div class="form-field">
          <mat-form-field>
            <input matInput
                   [placeholder]="'profile.placeholders.givenName' | translate"
                   formControlName="givenNameControl"
                   type="text"
                   required
            >
          </mat-form-field>
        </div>
        <div class="form-field">
          <mat-form-field>
            <input matInput
                   [placeholder]="'profile.placeholders.familyName' | translate"
                   formControlName="familyNameControl"
                   type="text"
                   required
            >
          </mat-form-field>
        </div>
        <div class="form-field">
          <mat-form-field>
            <input matInput
                   [placeholder]="'profile.placeholders.email' | translate"
                   formControlName="emailControl"
                   type="text"
                   required
            >
          </mat-form-field>
        </div>
        <div class="form-field">
          <mat-form-field>
            <input matInput
                   [placeholder]="'profile.placeholders.phoneNumber' | translate"
                   formControlName="phoneNumberControl"
                   type="string"
                   required
            >
          </mat-form-field>
        </div>
        <div class="form-field">
          <mat-form-field>
            <mat-select
              [placeholder]="'profile.placeholders.knownLanguages' | translate"
              multiple
              formControlName="knownLanguageControl"
              (selectionChange)="changeKnownLanguage($event)">
              <mat-option *ngFor="let local of localeList" [value]="local">{{local.displayName}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="form-field">
          <mat-form-field>
            <mat-select
              [placeholder]="'profile.placeholders.preferredLanguage' | translate"
              formControlName="preferredLanguageControl">
              <mat-option *ngFor="let locale of knownLocales" [value]="locale">
                {{locale.displayName}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="form-field">
          <br/>
          <mat-divider></mat-divider>
          <br/>
        </div>
        <div class="form-field">
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                {{ 'profile.needAssistance' | translate }}
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div>
              <mat-checkbox placeholder="Requires Translation or Cultural Aid"
                            formControlName="requiresTranslationOrCulturalAidControl"
                            (change)="changeAid($event);"
              >
                <div class="checkbox-text">
                  {{ 'profile.needAssistanceCheck' | translate }}
                </div>
              </mat-checkbox>
              <mat-form-field>
                <mat-select
                  [placeholder]="'profile.placeholders.assistedLanguage' | translate"
                  [disabled]="!requiresTranslationOrCulturalAid"
                  formControlName="assistanceLanguageControl"
                  (selectionChange)="changeAssistanceLanguage($event)">
                  <mat-option *ngFor="let local of localeList" [value]="local">{{local.displayName}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </mat-expansion-panel>
        </div>
        <div class="form-field">
          <br/>
          <mat-divider></mat-divider>
          <br/>
        </div>
        <div class="form-field">
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                {{ 'profile.offerAssistance' | translate }}
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div>
              <mat-checkbox placeholder="Interested in Providing Translation or Cultural Aid for Others"
                            formControlName="interestedInTranslationOrCulturalAidForOthersControl"
                            (change)="changeCapabilities($event);"
              >
                <div class="checkbox-text">
                  {{ 'profile.offerAssistanceCheck' | translate }}
                </div>
              </mat-checkbox>
              <mat-form-field>
                <mat-select
                  [placeholder]="'profile.placeholder.assistanceCapabilities' | translate"
                  multiple
                  [disabled]="!interestedInTranslationOrCulturalAidForOthers"
                  formControlName="assistanceCapabilitiesControl"
                  (selectionChange)="changeAssistanceCapabilities($event)">
                  <mat-option *ngFor="let key of assistanceCapabilitiesAsReadableList" [value]="key">
                    {{key}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </mat-expansion-panel>
        </div>
        <div class="form-field">
          <br/>
          <mat-divider></mat-divider>
          <br/>
        </div>
        <div>
          <div class="button-container form-field">
            <button
              mat-raised-button
              color="warn"
              type="submit">{{ 'profile.submit' | translate }}
            </button>
          </div>
        </div>
        <br/>
      </form>
    </mat-card>
  </div>
</div>
